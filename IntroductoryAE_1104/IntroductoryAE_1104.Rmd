---
title: "應用計量經濟學導論"
subtitle: "實習課"
author: |
  <div style="margin-top:-18px; line-height:1.2;">
    <span style="font-weight:700;">王俊欽</span><br/>
    <span style="font-weight:700;">d14627001@ntu.edu.tw</span><br/>
    <span style="font-weight:700;">臺灣大學農業經濟研究所, 統計碩士學位學程</span><br/>
    <span style="font-weight:700;">2025/11/04</span><br/>
    &nbsp;
  </div>
output:
  xaringan::moon_reader:
    self_contained: true
    css: xaringan-themer.css
    #css: [xaringan-themer.css, zh-CN.css]
    #lib_dir: libs
    nature:
      highlightStyle: github
      highlightLanguage: ["r", "css", "yaml"]
      highlightLines: true
      countIncrementalSlides: false
---
```{r}

```

layout: true
background-image: url(https://www.agec.ntu.edu.tw/uploads/asset/data/675f864c74ccc38a768f8254/%E6%9C%AA%E4%BE%86%E5%B1%95%E6%9C%9B%E5%9C%96%E7%89%87.png)
background-position: 98% 2%
background-size: 5%

```{r setup, include=FALSE}
library(knitr)
library(kableExtra)
library(vistributions)
library(gginference)
library(dplyr)
library(ggplot2)
setwd(dirname(rstudioapi::documentPath()))
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = TRUE, tidy = FALSE)
xaringanExtra::use_panelset()
xaringanExtra::use_clipboard()
xaringanExtra::use_extra_styles(hover_code_line = TRUE)
```
```{r xaringanExtra, echo = FALSE}
xaringanExtra::use_progress_bar(color = "#EFBE43", location = "bottom")
```
```{r xaringan-themer, include=FALSE, warning=FALSE}
library(xaringanthemer)
style_duo(
  # colors
  primary_color = "#FDF7E9",
  secondary_color = "#EFBE43",
  header_color = "#333333",
  text_color = "#333333",
  code_inline_color = colorspace::lighten("#333333"),
  text_bold_color = colorspace::lighten("#333333"),
  link_color = "#4466B0",
  title_slide_text_color = "#4466B0",

  # fonts
  header_font_google = google_font("Martel", "300", "400"),
  text_font_google = google_font("Lato"),
  code_font_google = google_font("Fira Mono")
)

style_extra_css(
  # 只針對段落 (p) 和列表 (li) 內的 `code`
  list(
    "p code, li code" = list(  
      "border" = "1px solid #F6DB96",
      "padding" = "2px 4px",
      "border-radius" = "4px"
      ),
    "ul ul" = list(
      "list-style-type" = "'▸'"  # 第二層使用三角形 (▸)
      ),
    "ul ul ul" = list(
      "list-style-type" = "'✔'"  # 第三層使用勾勾 (✔)
      ),
    # 置中
    ".middle_block" = list(
      "position" = "absolute",
      "top" = "50%",
      "left" = "50%", # 使與預設靠左距離相同
      "transform" = "translate(-50%, -50%)",
      "width" = "85%",              # 控制內文寬度（可調整）
      "text-align" = "left"         
      ),
    # 縮排
    ".indent" = list(
      "text-indent" = "2em"
      ),
    # 自動換行
    "pre code" = list(
      "white-space" = "pre-wrap",
      "word-wrap" = "break-word"
      ),
    "pre" = list(
      "border" = "none",
      "box-shadow" = "2px 2px 2px 2px #F7EEDA",
      "padding" = "0.1em",
      "background" = "none !important",
      "overflow-x" = "auto",
      "border-radius" = "1px"
      ),
    # 條列圖示顏色
    "li::marker" = list(
      "content" = "• ",
      "color" =  "#EFBE43"
      )
    )
  )

```


```{r, echo = FALSE}
options(servr.daemon = TRUE)
```



---
class: center, middle, inverse

### practice, practice, practice !

---
# practice
```{r eval = F}
library(dplyr)
library(ggplot2)
```
```{r}
data(storms)
glimpse(storms)
```

---
# storms
.panelset[
.panel[.panel-name[question]
#### storms 中有哪些年份（year）的颶風資料？
]

.panel[.panel-name[answer1]
#### storms 中有哪些年份（year）的颶風資料？
```{r}
unique(storms$year)
```
]

.panel[.panel-name[answer2]
#### storms 中有哪些年份（year）的颶風資料？
```{r eval= F}
storms %>% select(year) %>% distinct()
```
]

]

---
# storms
.panelset[
.panel[.panel-name[question]
#### 篩選出西元 2000 年且風速大於 100 的觀察值。
]

.panel[.panel-name[answer1]
#### 篩選出西元 2000 年且風速大於 100 的觀察值。

```{r eval = F}
storms %>% filter(year == 2000 & wind > 100) 
```
]

.panel[.panel-name[answer2]
#### 篩選出西元 2000 年且風速大於 100 的觀察值。

```{r eval = F}
subset(storms, year == 2000 & wind > 100)
```
]

.panel[.panel-name[answer3]
#### 篩選出西元 2000 年且風速大於 100 的觀察值。

```{r eval = F}
storms[storms$year == 2000 & storms$wind > 100,]
```
]
]

---
# storms

.panelset[
.panel[.panel-name[question]
#### 將 storms 按照緯度由低到高排列
]

.panel[.panel-name[answer1]
#### 將 storms 按照緯度由低到高排列
```{r eval = F}
storms %>% arrange(lat)
```
]
]

---
# storms

.panelset[
.panel[.panel-name[question]
#### 新增一變數 is_major 表示此颶風是否為強烈颶風，如果 wind 大於 120 則為 1，不是則為 0。 
]

.panel[.panel-name[answer1]
#### 新增一變數 is_major 表示此颶風是否為強烈颶風，如果 wind 大於 120 則為 1，不是則為 0。 
```{r eval = F}
storms %>% mutate(is_major = if_else(wind > 120, 1, 0))
```
]

.panel[.panel-name[answer2]
#### 新增一變數 is_major 表示此颶風是否為強烈颶風，如果 wind 大於 120 則為 1，不是則為 0。 
```{r eval = F}
storms$is_major <- if_else(storms$wind > 120, 1, 0)
```
]

]

---
# storms 
.panelset[
.panel[.panel-name[question]
#### storms 中最後一個出現的颶風叫作什麼？
```{r eval = F}
storms %>% arrange
```
]
.panel[.panel-name[answer1]
#### storms 中最後一個出現的颶風叫作什麼？
```{r}
storms %>% arrange(desc(year), desc(month), desc(day)) %>% slice(1) %>% select(name)
```
]
.panel[.panel-name[answer2]
#### storms 中最後一個出現的颶風叫作什麼？
```{r}
storms %>% mutate(date = 10000 * year + 100 * month + day) %>%
  filter(date == max(date)) %>% distinct(name)
```

** 考慮有沒有更簡略的寫法？ **
]
.panel[.panel-name[answer3]
#### storms 中最後一個出現的颶風叫作什麼？
```{r}
storms %>% slice_max(order_by = 10000 * year + 100 * month + day, n = 1) %>% distinct(name)
```
]
]

---
# storms 

.panelset[
.panel[.panel-name[question]
#### 老題目了，請問每年各有多少個颶風（包含熱帶性低氣壓），注意重複值！
]
.panel[.panel-name[answer1]
#### 老題目了，請問每年各有多少個颶風（包含熱帶性低氣壓），注意重複值！
```{r}
storms %>% distinct(name, year) %>% group_by(year) %>% summarize(conut = n())
```
]
]

---
# storms 

.panelset[
.panel[.panel-name[question]
#### 繪製 wind 與 pressure 散布圖，並依據颶風狀態分組表示
```{r eval = F}
storms %>% ggplot
```
]
.panel[.panel-name[answer1]
#### 繪製 wind 與 pressure 散布圖，並依據颶風狀態分組表示

```{r out.width='45%', fig.align='center'}
storms %>% ggplot(aes(x = wind, y = pressure, color = status)) + geom_point(alpha= 0.5) + theme_minimal()
```
]
]

---
class: center, middle, inverse
### 謝謝
#### 下周見